<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Phenocam Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
  <nav>
    <a href="#" onclick="showPage('home', event)" class="nav-link active">Home</a>
    <a href="#" onclick="showPage('about', event)" class="nav-link">About</a>
    <a href="#" onclick="showPage('data', event)" class="nav-link">Data & Visualizations</a>
    <a href="#" onclick="showPage('gallery', event)" class="nav-link">Gallery</a>

  </nav>

  <div id="home" class="page active">
    <div class="header">
      <h1>üåø Phenocam Dashboard</h1>
      <p>Real-time vegetation monitoring and analysis</p>
    </div>

    <div class="dashboard dashboard-padding">
      <div class="card">
        <h3>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 7h-9M14 17H5M20 17h-3M14 7h-3" />
            <circle cx="17" cy="17" r="3" />
            <circle cx="11" cy="7" r="3" />
          </svg>
          Key Metrics
        </h3>
        <div class="stats-grid">
          <div class="stat-item">
            <span class="stat-value" id="ndvi-value">0.000</span>
            <span class="stat-label">NDVI Estimate</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" id="brightness-value">0</span>
            <span class="stat-label">Average Brightness</span>
          </div>
        </div>
      </div>

      <div class="card" id="image-card">
        <h3>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" />
            <circle cx="8.5" cy="8.5" r="1.5" />
            <path d="M21 15l-5-5L5 21" />
          </svg>
          Latest Phenocam Image
        </h3>
        <div class="image-container">
          <img id="phenocam-img" src="" alt="Phenocam"
            style="display:none; width:100%; height:100%; object-fit:cover; min-height:300px;">
          <div class="image-info">
            <strong>Captured:</strong> <span id="image-date">--</span><br>
            <strong>Location:</strong> <span id="image-station">--</span>

          </div>
          <div id="no-image" style="padding:20px; text-align:center; color:#666;">
            <div id="no-image" style="display:block; padding:20px; text-align:center; color:#666;">‚è≥ Loading image...
            </div>
          </div>
        </div>
      </div>

      <div class="card" id="chart-card">
        <h3>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 3v18h18" />
            <path d="M18 17l-3-3-3 3-3-3-3 3" />
          </svg>
          Vegetation Index Trends
        </h3>
        <div class="controls">
          <!-- <button class="btn" onclick="generateSampleData()">üìä Generate Sample Data</button>
          <button class="btn" onclick="updateChart()">üîÑ Refresh</button> -->
        </div>
        <div id="chart"></div>
      </div>
    </div>
  </div>

  <div id="about" class="page">
    <div class="dashboard dashboard-padding">
      <div class="card full-width">
        <h3>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10" />
            <path d="M12 16v-4M12 8h.01" />
          </svg>
          About Phenocam Dashboard
        </h3>
        <div class="about-content">
          <p>
            The Phenocam Dashboard is a comprehensive platform for monitoring and analyzing vegetation phenology through
            time-lapse imagery. This system provides researchers, ecologists, and land managers with real-time insights
            into ecosystem dynamics and seasonal changes.
          </p>

          <h4>üéØ What is Phenocam?</h4>
          <p>
            Phenocams are automated digital cameras that capture images of vegetation at regular intervals. These
            cameras serve as "eyes on the ground," documenting seasonal changes in plant communities, tracking green-up
            in spring, peak greenness in summer, and senescence in fall.
          </p>

          <div class="feature-grid">
            <div class="feature-box">
              <h5>üì∑ Automated Monitoring</h5>
              <p>Continuous 24/7 image capture</p>
            </div>
            <div class="feature-box">
              <h5>üìä Data Analysis</h5>
              <p>Real-time vegetation indices</p>
            </div>
            <div class="feature-box">
              <h5>üåç Climate Research</h5>
              <p>Track ecosystem responses</p>
            </div>
            <div class="feature-box">
              <h5>üî¨ Scientific Insights</h5>
              <p>Support research worldwide</p>
            </div>
          </div>

          <h4>üìà Key Features</h4>
          <ul>
            <li><strong>NDVI Calculation:</strong> Normalized Difference Vegetation Index estimates vegetation health
              and density</li>
            <li><strong>Chromatic Coordinates:</strong> Track seasonal color changes in vegetation</li>
            <li><strong>Time-Series Analysis:</strong> Visualize trends over days, months, and years</li>
            <li><strong>Image Archive:</strong> Browse historical phenocam imagery</li>
            <li><strong>Real-time Updates:</strong> Monitor current vegetation status</li>
          </ul>

          <h4>üî¨ Applications</h4>
          <p>
            Near-surface remote sensing‚Äìderived NDVI time series are widely used for monitoring vegetation growth and
            health at fine temporal scales. These data support the assessment of crop development, detection of stress
            conditions such as drought or disease, and evaluation of land management practices. NDVI time-series
            analysis also aids in identifying phenological transitions, including green-up, peak growth, and senescence
            phases. In ecological studies, it provides insights into ecosystem productivity, vegetation responses to
            climatic variability, and long-term environmental change. Due to its high temporal resolution and
            site-specific accuracy, near-surface NDVI is especially valuable for validating satellite-based observations
            and improving vegetation and carbon-cycle models.
          </p>

          <h4>üí° How It Works</h4>
          <p>
            The dashboard processes phenocam images to extract vegetation indices that quantify greenness and other
            properties. These metrics are calculated from the RGB values of pixels within a region of interest,
            providing objective measurements of vegetation dynamics over time.
          </p>

          <h4>ü§ù Get Involved</h4>
          <p>
            This dashboard is part of a growing network of phenocam installations worldwide. Whether you're a
            researcher, educator, or nature enthusiast, phenocam data can help us better understand and protect our
            ecosystems in a changing world.
          </p>
        </div>
      </div>
    </div>
  </div>

  <div id="data" class="page">
    <div class="dashboard dashboard-padding">
      <div class="card full-width">
        <h3>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 3v18h18" />
            <path d="M18 17l-3-3-3 3-3-3-3 3" />
          </svg>
          Data & Visualizations
        </h3>

        <!-- Time Series Chart -->
        <div class="visualization-section">
          <h4>Vegetation Index Time Series</h4>
          <div class="controls">

            <select id="fileDropdown" class="btn">
    <option value="">-- Select Date --</option>
</select>

<button class="btn" onclick="exportChartData()">üíæ Export CSV</button>

          </div>
          <div id="data-chart"></div>
        </div>

        <!-- Statistics Panel -->
        <div class="visualization-section">
          <h4>Statistical Summary</h4>
          <div id="statistics-panel" class="stats-panel">
            <div class="stat-card">
              <span class="stat-label">Mean NDVI</span>
              <span class="stat-value" id="mean-ndvi">--</span>
            </div>
            <div class="stat-card">
              <span class="stat-label">Max NDVI</span>
              <span class="stat-value" id="max-ndvi">--</span>
            </div>
            <div class="stat-card">
              <span class="stat-label">Min NDVI</span>
              <span class="stat-value" id="min-ndvi">--</span>
            </div>
            <div class="stat-card">
              <span class="stat-label">Data Points</span>
              <span class="stat-value" id="data-points">--</span>
            </div>
          </div>
        </div>

        <!-- Seasonal Analysis -->
        <div class="visualization-section">
          <h4>Seasonal Analysis</h4>
          <div id="seasonal-chart"></div>
        </div>

        <!-- Data Table -->
        <div class="visualization-section">
          <h4>Raw Data Table</h4>
          <div class="table-controls">
            <input type="text" id="search-input" placeholder="Search by date..." class="search-input">
            <!-- <select id="season-filter" class="filter-select">
              <option value="all">All Seasons</option>
              <option value="Summer (Grishma)">Summer (Grishma)</option>
              <option value="Monsoon (Varsha)">Monsoon (Varsha)</option>
              <option value="Autumn (Sharad)">Autumn (Sharad)</option>
              <option value="Winter (Hemanta)">Winter (Hemanta)</option>
            </select> -->
          </div>
          <div id="data-table" class="data-table-container"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="gallery" class="page">
    <div class="dashboard dashboard-padding">
      <div class="card full-width">
        <h3>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7" />
            <rect x="14" y="3" width="7" height="7" />
            <rect x="3" y="14" width="7" height="7" />
            <rect x="14" y="14" width="7" height="7" />
          </svg>
          Image Gallery
        </h3>
        <div id="gallery-grid" class="gallery-grid"></div>
      </div>
    </div>
  </div>

  <script>
    function showPage(pageId, evt) {
      // Prevent default link behavior
      if (evt && evt.preventDefault) evt.preventDefault();

      // Hide all pages
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });

      // Remove active class from all nav links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
      });

      // Show selected page
      document.getElementById(pageId).classList.add('active');

      // Add active class to clicked nav link
      if (evt && evt.target) evt.target.classList.add('active');

      // If user opened the gallery, load images from backend
      if (pageId === 'gallery' && typeof loadGalleryWithD3 === 'function') {
        loadGalleryWithD3();
      }

      // If user opened data page, load visualizations
      if (pageId === 'data' && typeof loadDataVisualization === 'function') {
        loadDataVisualization();
      }
    }
  </script>
  <script src="script.js"></script>
</body>

</html>